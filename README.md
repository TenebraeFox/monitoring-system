# Monitoring System

## Описание
**Monitoring System** — это open-source решение для мониторинга серверов. Система состоит из:
- **Сервера**: Центральный узел для сбора метрик, их сохранения и визуализации через веб-интерфейс.
- **Агентов**: Узлы, которые собирают метрики (CPU, RAM, диск) и отправляют их на сервер.

Система визуализирует:
- Загрузка CPU (%)
- Использование оперативной памяти (MB)
- Занятое дисковое пространство (%)

## Технологии
- **Python**: Основной язык разработки.
- **Flask**: Реализация API и веб-интерфейса.
- **SQLite**: Легковесная база данных для хранения метрик.
- **psutil**: Сбор системных данных.
- **Docker**: Контейнеризация серверов и агентов.
- **Chart.js (в перспективе)**: Для построения графиков.

## Функционал
1. **Сервер**:
   - Принимает данные от агентов через REST API.
   - Сохраняет данные в базе SQLite.
   - Отображает метрики в веб-интерфейсе (http://<SERVER_IP>:5000).
   - Доступ защищен логином и паролем:
     - Логин: `admin`
     - Пароль: `P@ssw0rd`

2. **Агенты**:
   - Сбор системных метрик (CPU, RAM, диск) с помощью библиотеки `psutil`.
   - Отправка метрик на сервер через HTTP POST-запрос.

## Установка и запуск

### **Предварительные требования**
- Docker и Docker Compose.
- Сервер (Linux или Windows), либо локальная машина для тестирования.

### **1. Установка сервера и агентов через Docker Compose**

1. **Клонируйте репозиторий**:
   ```bash
   git clone https://github.com/<ваш-username>/monitoring-system.git
   cd monitoring-system
   ```

2. **Запустите систему с помощью Docker Compose**:
   ```bash
   docker-compose up --build
   ```

3. **Откройте веб-интерфейс**:
   - Перейдите в браузере на `http://<SERVER_IP>:5000`.
   - Войдите с логином `admin` и паролем `P@ssw0rd`.

4. **Добавление агентов**:
   - Агенты автоматически запускаются вместе с сервером, если они включены в `docker-compose.yml`.

### **2. Установка и запуск агента вручную**

1. **Перейдите в директорию агента**:
   ```bash
   cd agent
   ```

2. **Установите зависимости**:
   ```bash
   pip install -r requirements.txt
   ```

3. **Запустите агента**:
   ```bash
   python agent.py
   ```

4. **Изменение адреса сервера**:
   В файле `agent.py` обновите значение переменной `SERVER_URL`:
   ```python
   SERVER_URL = "http://<SERVER_IP>:5000/api/metrics"
   ```

5. **Запуск в фоне**:
   ```bash
   nohup python agent.py &
   ```

### **3. Запуск дополнительных агентов**

Чтобы запустить несколько агентов (например, для мониторинга разных машин), выполните следующие действия:
1. Скопируйте папку `agent` на другую машину.
2. Убедитесь, что адрес сервера (`SERVER_URL`) указан корректно.
3. Запустите агента через Python или Docker, как описано выше.

## Структура проекта

```plaintext
monitoring-system/
├── server/
│   ├── app.py                # Основной серверный скрипт
│   ├── requirements.txt      # Зависимости сервера
│   ├── Dockerfile            # Dockerfile для сервера
│   ├── templates/
│   │   └── dashboard.html    # HTML-файл для веб-интерфейса
├── agent/
│   ├── agent.py              # Основной скрипт агента
│   ├── requirements.txt      # Зависимости агента
│   ├── Dockerfile            # Dockerfile для агента
├── docker-compose.yml         # Docker Compose для запуска всей системы
├── README.md                  # Документация проекта
```
## Использование

1. Откройте веб-интерфейс: `http://<SERVER_IP>:5000`.
2. Войдите с логином `admin` и паролем `P@ssw0rd`.
3. Мониторинг начнется автоматически, как только агенты начнут отправлять данные.

## Расширения
- **Безопасность**:
  - Подключить HTTPS для API-сервера.
  - Добавить шифрование для передачи данных между агентами и сервером.
- **Визуализация**:
  - Динамические графики для отображения данных.
- **Масштабируемость**:
  - Перенести базу данных на PostgreSQL или MySQL.
  - Настроить агентов на использование брокера сообщений (RabbitMQ, Kafka).
